<div class="dash-buttons">
<%= link_to "Back to dashboard", dashboard_path, class: "btn results-buttons"  %>
<%= link_to "Back to deck overview", deck_path(@deck), class: "btn results-buttons"  %>
</div>
<div id="results-container"></div>
<style type="text/css">
  #results-container{
    position: absolute;
    width: 100vw;
    height:100vh;
  }
  #results-container canvas{
    width: 100vw;
    height: 100vh;
  }
</style>

<div class="container" >
  <h3 class="title-results">Your results for <%= @deck.name %>: </h3>
  <div class="row justify-content-center">
    <div class="results-in-con">
      <div class="col-12 results-box">
        <%= render 'results_text_query' %>
      </div>
    </div>
  </div>

  <table>
    <thead>
      <tr>
        <th>Question</th>
        <th>Answer</th>
        <th>Just Now</th>
        <% if @deck.scores.where(user: current_user).size > 1 %>
          <th><%= @deck.scores.where(user: current_user).last.created_at.strftime("%D %R") %>:</th>
        <% end %>
        <% if @deck.scores.where(user: current_user).size > 2 %>
          <th><%= @deck.scores.where(user: current_user)[-3].created_at.strftime("%D %R") %>:</th>
        <% end %>
      </tr>
    </thead>
    <tbody>
      <% @deck.scores.where(user: current_user).last.card_scores.each do |score| %>
      <tr>
        <td><%= score.card.question %></td>
        <td><%= score.card.answer %></td>
        <% if score.correct %>
          <td class='correct-table'>CORRECT</td>
        <% else %>
          <td class='incorrect-table'> INCORRECT</td>
        <% end %>
        <%= render 'first_previous', score: score %>
        <%= render 'second_previous', score: score %>
      </tr>
      <% end %>
    </tbody>
  </table>
</div>
